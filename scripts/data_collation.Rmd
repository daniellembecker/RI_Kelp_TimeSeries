---
title: "data_collation"
author: "daniellembecker"
date: "2024-03-21"
output: html_document
---

# Use this script to clean and merge unique data types (e.g., swath, fish, UPC) from multiple years

# Load libraries 
```{r}
library(plyr)
library(dplyr)
library(tidyverse)
```


# Load all data files from multiple years and seperate them into specific categories: UPC, swath, Morph, Site, QUAD, kelp, fish, and COVER
```{r}

# Set your directory path
directory <- "data/kelp_timeseries_data/"

# List files in the directory
files <- list.files(directory)

# Initialize an empty list to store data frames
data_frames <- list()

# Loop through each file
for (file in files) {
    # Read the file into a data frame
    # Adjust the read function according to your file type (e.g., read.csv, read.table)
    # Specify other parameters as needed (e.g., header = TRUE)
    file_path <- file.path(directory, file)
    df_name <- gsub("\\..*", "", file)  # Extract file name without extension
    assign(df_name, read.csv(file_path, stringsAsFactors = FALSE))
}

# Now, each file is a separate data frame with its own variable name


```

# Combine kelp dataframes
```{r}
# Kelp data is cleaned and ready

# use rbind.fill() method in R to combine data frames with different columns
kelp_data <- rbind.fill(kelp, FtWeatherill_kelp_2016)

#delete repetative data collector columns
kelp_data <- kelp_data[ -c(11:17) ]

```

# Combine fish dataframes
```{r}

# use rbind.fill() method in R to combine data frames with different columns
fish_data <- rbind.fill(FtWeatherill_fish_2016, FtWeatherill_fish_2017, fish_2018_Hump_Lab_size_classes, fish, fish_Aggregated)

# remove columns with observer and unneeded data
fish_data <- fish_data[ -c(10:13) ]

# fish dataframe has size in wide format, discuss I can change this to long is you want but wanted to make sure size classes matched

```

# Combine UPC dataframes
```{r}

# use rbind.fill() method in R to combine data frames with different columns
UPC_data <- rbind.fill(UPC, UPC_2017, UPC_2018, FtWeatherill_UPC_2016, FtWeatherill_UPC_2016_CT)

# Rename ft. wetherill to fort wetherill
UPC_data$SITE[UPC_data$SITE == "Ft. Weatherill"] <- "Fort Wetherill"

# remove columns with observer and unneeded data
UPC_data <- UPC_data[ -c(21:24) ]
```

# Combine swath dataframes
```{r}

# use rbind.fill() method in R to combine data frames with different columns
swath_data <- rbind.fill(swath, swath_2018, swath_count, FtWeatherill_swath_2016)

# Rename ft. wetherill to fort wetherill
swath_data$SITE[swath_data$SITE == "Ft.Weatherill"] <- "Fort Wetherill"

# the one swath data.frame has 115 variables because each species is listed instead of its code, fo you want me to replace with the code and make it wide to long format?

```

# Combine Kelp_Morph dataframes
```{r}

# use rbind.fill() method in R to combine data frames with different columns
morph_data <- rbind.fill(Subsurface_Kelp_Morph_2017, Subsurface_Kelp_Morph_2018)

# remove columns with observer and unneeded data
morph_data <- morph_data[ -c(11:14) ]
```

# Combine site.info dataframes
```{r}

# use rbind.fill() method in R to combine data frames with different columns
site.info.dat <- rbind.fill(Site_info_2017, Site_info_2018, Site_info_template_v1)

```

# Combine QUAD dataframes
```{r}

# To do: species codes transform

# use rbind.fill() method in R to combine data frames with different columns
QUAD_data <- rbind.fill(QUAD, QUAD_2018, FtWeatherill_QUAD_2017, FtWeatherill_QUAD_2016_TALBENHORIN)

# Rename ft. wetherill to fort wetherill
QUAD_data$SITE[QUAD_data$SITE == "Ft Wetherill"] <- "Fort Wetherill"



```








